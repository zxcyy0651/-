<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>HYUFLIX - Shop</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <div class="logo" onclick="location.href='index.html'">HYUFLIX</div>
  <nav>
    <span onclick="location.href='index.html'">í™ˆ</span>
    <span onclick="location.href='shop.html'" style="color:red;">ìƒì </span>
    <span onclick="location.href='character.html'">ìºë¦­í„°</span>
    <span onclick="location.href='mypage.html'">ë§ˆì´í˜ì´ì§€</span>
  </nav>
  <div class="user-info">
    <span id="header-nickname">User</span>
    <span class="mileage-display">ğŸ’° <span id="header-mileage">0</span></span>
  </div>
</header>

<section class="shop-hero">
  <h1>ğŸ›¸ SF ITEM SHOP</h1>
  <p>ë§ˆì¼ë¦¬ì§€ë¡œ ë¯¸ë˜í˜• ì•„ì´í…œì„ êµ¬ë§¤í•˜ì„¸ìš”</p>
  <div class="mileage-big">
    ë³´ìœ  ë§ˆì¼ë¦¬ì§€: <span id="current-mileage">0</span> ğŸ’
  </div>
</section>

<section class="shop-grid" id="shop-grid">
  <!-- ì•„ì´í…œë“¤ì´ ì—¬ê¸° ë Œë”ë§ë¨ -->
</section>

<script src="game.js"></script>
<script>
  // í˜ì´ì§€ ë¡œë“œ ì‹œ ì²´í¬
  checkLogin();
  updateHeader();
  
  // ìƒì  ì•„ì´í…œ ëª©ë¡
  const shopItems = [
    {id: 1, name: "ì‚¬ì´ë²„ ì„ ê¸€ë¼ìŠ¤", price: 10, icon: "ğŸ•¶ï¸", type: "head"},
    {id: 2, name: "ë„¤ì˜¨ ì¬í‚·", price: 20, icon: "ğŸ§¥", type: "body"},
    {id: 3, name: "í™€ë¡œê·¸ë¨ ì‹œê³„", price: 15, icon: "âŒš", type: "hand"},
    {id: 4, name: "ì–‘ì í—¤ë“œì…‹", price: 30, icon: "ğŸ§", type: "head"},
    {id: 5, name: "ë ˆì´ì € ê±´", price: 25, icon: "ğŸ”«", type: "hand"},
    {id: 6, name: "ìš°ì£¼ë³µ", price: 50, icon: "ğŸ‘¨â€ğŸš€", type: "body"},
    {id: 7, name: "ë¡œë´‡ íŒ”", price: 35, icon: "ğŸ¦¾", type: "hand"},
    {id: 8, name: "ê´‘ì„ ê²€", price: 40, icon: "âš”ï¸", type: "hand"},
    {id: 9, name: "ì œíŠ¸íŒ©", price: 45, icon: "ğŸ’", type: "back"},
    {id: 10, name: "AI ë“œë¡ ", price: 30, icon: "ğŸ¤–", type: "pet"}
  ];
  
  // ìƒì  ë Œë”ë§
  function renderShop() {
    const userData = getUserData();
    const grid = document.getElementById('shop-grid');
    grid.innerHTML = '';
    
    document.getElementById('current-mileage').innerText = userData.mileage;
    
    shopItems.forEach(item => {
      const owned = userData.inventory.some(i => i.id === item.id);
      
      const card = document.createElement('div');
      card.className = 'shop-card';
      if(owned) card.classList.add('owned');
      
      card.innerHTML = `
        <div class="item-icon">${item.icon}</div>
        <h3>${item.name}</h3>
        <p class="item-type">${getTypeKorean(item.type)}</p>
        <p class="item-price">ğŸ’ ${item.price}</p>
        ${owned ? 
          '<button class="owned-btn" disabled>ë³´ìœ ì¤‘</button>' :
          `<button class="buy-btn" onclick="buyItem(${item.id})">êµ¬ë§¤í•˜ê¸°</button>`
        }
      `;
      
      grid.appendChild(card);
    });
  }
  
  // ì•„ì´í…œ êµ¬ë§¤
  function buyItem(itemId) {
    const userData = getUserData();
    const item = shopItems.find(i => i.id === itemId);
    
    if(!item) return;
    
    // ì´ë¯¸ ë³´ìœ ì¤‘
    if(userData.inventory.some(i => i.id === itemId)) {
      alert('ì´ë¯¸ ë³´ìœ í•œ ì•„ì´í…œì…ë‹ˆë‹¤!');
      return;
    }
    
    // ë§ˆì¼ë¦¬ì§€ ë¶€ì¡±
    if(userData.mileage < item.price) {
      alert(`ë§ˆì¼ë¦¬ì§€ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤! (í•„ìš”: ${item.price}, ë³´ìœ : ${userData.mileage})`);
      return;
    }
    
    // êµ¬ë§¤ í™•ì¸
    if(!confirm(`${item.name}ì„(ë¥¼) ${item.price} ë§ˆì¼ë¦¬ì§€ì— êµ¬ë§¤í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
      return;
    }
    
    // êµ¬ë§¤ ì²˜ë¦¬
    userData.mileage -= item.price;
    userData.inventory.push(item);
    
    saveUserData(userData);
    
    alert(`ğŸ‰ ${item.name}ì„(ë¥¼) êµ¬ë§¤í–ˆìŠµë‹ˆë‹¤!`);
    
    renderShop();
    updateHeader();
  }
  
  function getTypeKorean(type) {
    const types = {
      head: 'ë¨¸ë¦¬',
      body: 'ìƒì˜',
      hand: 'ì†',
      back: 'ë“±',
      pet: 'í«'
    };
    return types[type] || type;
  }
  
  // ì´ˆê¸° ë Œë”ë§
  renderShop();
</script>

</body>
</html>